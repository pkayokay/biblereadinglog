<% render_title 'Reading Logs'%>

<div class="">
  <div class="mb-5 flex items-start space-y-3 sm:space-y-0 sm:justify-between sm:items-center flex-col sm:flex-row">
    <h1 class="text-2xl font-semibold">Reading Logs</h1>
    <%= link_to new_reading_log_path, class: "btn btn--primary w-auto btn--slim flex items-center space-x-1 pl-1.5" do %>
      <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-plus"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
      <span>New Reading Log</span>
    <% end %>
  </div>
</div>
<div class="flex justify-start mb-6 space-x-5">
  <%= link_to root_path, class: "#{'!opacity-100 border-red-700 text-red-700
  ' unless @has_completed_status} group block text-lg text-center font-medium text-nowrap opacity-50 hover:opacity-100 focus-visible:opacity-100" do %>
    <span class="group-hover:text-red-700 group-focus-visible:text-red-700 group-focus-visible:border-b-red-700 pb-2 border-b-2 border-transparent <%= 'border-b-red-700' unless @has_completed_status %>">Started</span>
  <% end %>
  <%= link_to root_path(status: 'completed'), class: "#{'!opacity-100 border-red-700 text-red-700
  ' if @has_completed_status} group block text-lg text-center font-medium text-nowrap opacity-50 hover:opacity-100 focus-visible:opacity-100" do %>
    <span class="group-hover:text-red-700  group-focus-visible:text-red-700 group-focus-visible:border-b-red-700 pb-2 border-b-2 border-transparent <%= 'border-b-red-700' if @has_completed_status %>">Completed</span>
  <% end %>
</div>

<% if @reading_logs.present? %>
  <div class="pb-24">
    <%= turbo_frame_tag reading_logs_turbo_frame_id do %>
      <%= render @reading_logs %>
    <% end %>
    <div class="infinite-scroll">
      <style>
        .infinite-scroll turbo-frame[loading="lazy"]:empty {
          margin-top: -80px; /* lazy load offset */
          display: block;
        }
      </style>
      <%= turbo_frame_tag reading_logs_pagination_turbo_frame_id,
        src: root_path(format: :turbo_stream, page: @pagy.next, status: params[:status]),
        loading: :lazy %>
    </div>
  </div>
<% else %>
  <div class="mx-4 px-4 pt-20 pb-24 rounded-lg text-lg text-center">
    <% if @has_completed_status %>
    <p class="opacity-50">You don't have any completed reading logs.</p>
    <% else %>
    <p class="opacity-50">You don't have any reading logs in progress.</p>
    <% end %>
  </div>
<% end %>